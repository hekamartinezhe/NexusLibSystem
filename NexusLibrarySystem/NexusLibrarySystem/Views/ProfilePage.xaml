<Page x:Class="NexusLibrarySystem.Views.ProfilePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Profile">

    <Grid Background="{StaticResource BackgroundBrush}" Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Encabezado -->
        <TextBlock Text="Perfil del Usuario"
                   FontSize="28"
                   FontWeight="Bold"
                   Foreground="{StaticResource PrimaryBrush}"
                   Margin="0,0,0,20"/>

        <!-- Contenido -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Top" Width="600" Margin="0 0 0 40">

                <!-- Panel de información del perfil -->
                <Border CornerRadius="15"
                        Background="{StaticResource SurfaceBrush}"
                        Padding="20" Margin="0 0 0 20"
                        Effect="{StaticResource CardShadow}">
                    <StackPanel Orientation="Horizontal">
                        <!-- Avatar -->
                        <Ellipse Width="80" Height="80" Margin="0 0 20 0" StrokeThickness="2" Stroke="{StaticResource PrimaryBrush}">
                            <Ellipse.Fill>
                                <ImageBrush ImageSource="/Assets/Assets.png" />
                            </Ellipse.Fill>
                        </Ellipse>

                        <!-- Datos del usuario -->
                        <StackPanel VerticalAlignment="Center" >
                            <TextBlock Text="{Binding FullName}" FontSize="20" FontWeight="Bold" Foreground="{StaticResource OnSurfaceBrush}" />
                            <TextBlock Text="{Binding EnrollmentNum}" Foreground="{StaticResource SecondaryBrush}" />
                            <TextBlock Text="{Binding Email}" Foreground="{StaticResource SecondaryBrush}" />
                            <TextBlock Text="Rol: Estudiante" Foreground="{StaticResource PrimaryBrush}" />
                            <TextBlock Text="Estado de Cuenta: Activa" Foreground="Green" />
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Título de préstamos -->
                <TextBlock Text="Préstamos Activos"
                           FontSize="18"
                           FontWeight="SemiBold"
                           Margin="0 0 0 10"
                           Foreground="{StaticResource OnBackgroundBrush}"/>

                <!-- Tabla de préstamos -->
                <DataGrid x:Name="LoansDataGrid"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          IsReadOnly="True"
                          Height="250"
                          Background="{StaticResource SurfaceBrush}"
                          RowBackground="{x:Null}"
                          AlternatingRowBackground="{StaticResource AlternateRowBrush}"
                          GridLinesVisibility="None"
                          ColumnHeaderHeight="32"
                          HeadersVisibility="Column"
                          Margin="0 10 0 0"
                          BorderThickness="0">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Título" Binding="{Binding BookTitle}" Width="*" />
                        <DataGridTextColumn Header="Fecha Préstamo" Binding="{Binding LoanDate}" Width="Auto"/>
                        <DataGridTextColumn Header="Fecha Límite" Binding="{Binding DueDate}" Width="Auto"/>
                        <DataGridTextColumn Header="Estado" Binding="{Binding Status}" Width="Auto"/>
                    </DataGrid.Columns>
                </DataGrid>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>
